{"$schema":"https://pbiadx.powerbi.com/static/d/schema/60/dashboard.json","id":"fd0ab381-75ae-4f26-9e1d-dd8cbf8fe5db","eTag":"\"f98095021ee44f3db875d4fbc783997f\"","schema_version":"60","title":"TransformerStream","autoRefresh":{"enabled":true,"defaultInterval":"30s","minInterval":"1s"},"tiles":[{"id":"1c13667e-6bb1-4b57-bae7-28416ad42e6d","title":"Service Point Statistics","visualType":"line","pageId":"802aac5f-0674-4f84-8151-c545c8ec4ea3","layout":{"x":0,"y":0,"width":9,"height":7},"queryRef":{"kind":"query","queryId":"fa3d1f8e-6f62-47a0-ae1f-2103f365b1c5"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":"MeterID","yColumns":["AverageKW"],"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"c2058404-b1c8-4834-9557-785eae797865","title":"ServicePoint Data","visualType":"table","pageId":"802aac5f-0674-4f84-8151-c545c8ec4ea3","layout":{"x":0,"y":14,"width":24,"height":9},"queryRef":{"kind":"query","queryId":"c99154da-51b3-4212-b55b-bcc2987c25d5"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"fa3540dc-0e9c-4c03-853b-2b7a5fcb301b","title":"Overloaded Transformers","visualType":"map","pageId":"802aac5f-0674-4f84-8151-c545c8ec4ea3","layout":{"x":0,"y":7,"width":6,"height":7},"queryRef":{"kind":"query","queryId":"14069113-c166-4f4b-9915-90dc4b497bbf"},"visualOptions":{"map__type":"bubble","map__latitudeColumn":"Latitude","map__longitudeColumn":"Longitude","map__labelColumn":"RatedkVA","map__sizeColumn":"kVA","map__sizeDisabled":false,"map__geoType":"numeric","map__geoPointColumn":null}},{"id":"62f092b5-fb2c-429a-a48d-840b51b72f6e","title":"KVA Rating High Alerts","visualType":"column","pageId":"802aac5f-0674-4f84-8151-c545c8ec4ea3","layout":{"x":6,"y":7,"width":7,"height":7},"queryRef":{"kind":"query","queryId":"b9d36650-17a5-4192-b439-45f90efc3754"},"visualOptions":{"xColumn":"TransformerID","multipleYAxes":{"additional":[],"showMultiplePanels":false,"base":{"horizontalLines":[],"yAxisScale":"linear","yAxisMaximumValue":null,"yAxisMinimumValue":null,"columns":[],"label":"","id":"-1"}},"yColumns":["kVARated","KvaRating"],"seriesColumns":["MeterNumber"],"anomalyColumns":null,"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"selectedDataOnLoad":{"all":false,"limit":5},"dataPointsTooltip":{"all":false,"limit":4}}},{"id":"eec0ffba-edff-4372-87ce-5489fc71e1f0","title":"Low kVA Alerts","visualType":"column","pageId":"802aac5f-0674-4f84-8151-c545c8ec4ea3","layout":{"x":14,"y":0,"width":10,"height":7},"queryRef":{"kind":"query","queryId":"e8d6f3c3-0cfd-48c9-af41-0aae11942511"},"visualOptions":{"xColumn":null,"multipleYAxes":{"additional":[],"showMultiplePanels":false,"base":{"horizontalLines":[],"yAxisScale":"linear","yAxisMaximumValue":null,"yAxisMinimumValue":null,"columns":[],"label":"","id":"-1"}},"yColumns":["RatedkVA","KvaRating"],"seriesColumns":null,"anomalyColumns":null,"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"6b44b868-f55d-4254-978f-aa0bbcaef7e1","title":"Low kVA Rating Alert Count","visualType":"table","pageId":"802aac5f-0674-4f84-8151-c545c8ec4ea3","layout":{"x":9,"y":0,"width":5,"height":7},"queryRef":{"kind":"query","queryId":"eac6a27b-4864-4929-85b4-b1a441543602"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":false,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[{"id":"3e0872b6-b680-44e6-aae4-1b0cf0004684","ruleType":"colorByCondition","applyToColumn":null,"hideText":false,"applyTo":"cells","conditions":[{"operator":">","column":"AlertCount","values":["50"]}],"chainingOperator":"and","colorStyle":"bold","color":"red","tag":"","icon":"warning","ruleName":"","visualType":"table"},{"id":"bb41b827-e636-4b0c-8079-541cf40f544d","ruleType":"colorByCondition","applyToColumn":null,"hideText":false,"applyTo":"cells","conditions":[{"operator":">","column":"AlertCount","values":["15"]},{"operator":"<=","column":"AlertCount","values":["50"]}],"chainingOperator":"and","colorStyle":"bold","color":"yellow","tag":"","icon":"critical","ruleName":"","visualType":"table"}]}},{"id":"a2b7b09a-dd42-4545-9135-b66cc887e8f8","title":"Low Side Alerts","visualType":"column","pageId":"802aac5f-0674-4f84-8151-c545c8ec4ea3","layout":{"x":13,"y":7,"width":11,"height":7},"queryRef":{"kind":"query","queryId":"3187362b-539f-43d6-b4ee-0da21a1d7890"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":"RatedkVA","yColumns":null,"seriesColumns":["MeterNumber"],"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}}],"baseQueries":[],"parameters":[{"kind":"duration","id":"58c23801-b597-4c9f-ba28-ad259378a62b","displayName":"Time range","description":"","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":1,"unit":"hours"},"showOnPages":{"kind":"all"}}],"dataSources":[{"id":"4c6e2755-219f-495f-bcf4-1632f2930f8b","kind":"kusto-trident","scopeId":"kusto-trident","clusterUri":"https://trd-0pxz7qbvg08gu01u5w.z8.kusto.fabric.microsoft.com/","database":"103187f7-c478-459c-8161-7e5ae4f1f4a3","name":"TransformerEH","workspace":"4c420ece-3c45-402c-90ce-49beed5b9bbe"}],"pages":[{"name":"Page 1","id":"802aac5f-0674-4f84-8151-c545c8ec4ea3"}],"queries":[{"dataSource":{"kind":"inline","dataSourceId":"4c6e2755-219f-495f-bcf4-1632f2930f8b"},"text":"let Window = todatetime(now(-10h));\nexternal_table(\"transformers\")\n| join kind=innerunique external_table(\"easttransformers\") on TransformerID\n| join kind=innerunique ActiveTransformers on ServicePointID\n| project MeterID,ServicePointID,['datetime'],TotalKw,LowSideVoltage,KvaRating\n| where todatetime(['datetime']) >= Window\n| summarize AverageKW = avg(todouble(TotalKw)), MinLowSideV = min(todouble(LowSideVoltage)),\n  MaxKVA = max(todouble(KvaRating)),MinKVA=min(todouble(KvaRating)) by MeterID\n| order by MeterID\n| render columnchart \n","id":"fa3d1f8e-6f62-47a0-ae1f-2103f365b1c5","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"4c6e2755-219f-495f-bcf4-1632f2930f8b"},"text":"external_table(\"transformers\")\n| join kind=innerunique ActiveTransformers on ServicePointID\n| join kind=innerunique external_table('easttransformers') on TransformerID\n| project-rename RatedkVA=kVARating,ReadDate=['datetime'],LowsideVoltageRating=LowSideVoltage1\n| project ReadDate,TransformerID,MeterNumber,TotalKw,KvaRating,RatedkVA,LowSideVoltage,LowsideVoltageRating","id":"c99154da-51b3-4212-b55b-bcc2987c25d5","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"4c6e2755-219f-495f-bcf4-1632f2930f8b"},"text":"let Window = now(-10h);\nexternal_table(\"transformers\")\n| join kind=innerunique external_table(\"easttransformers\") on TransformerID\n| join kind=innerunique ActiveTransformers on ServicePointID\n| project ['datetime'],MeterNumber,todouble(KvaRating),kVARating,Latitude,Longitude\n| project-rename ReadDate=['datetime'],Meter=MeterNumber,kVA=KvaRating,RatedkVA=kVARating\n| where todatetime(ReadDate) >= Window and todouble(kVA) > (todouble(RatedkVA))","id":"14069113-c166-4f4b-9915-90dc4b497bbf","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"4c6e2755-219f-495f-bcf4-1632f2930f8b"},"text":"let Window = todatetime(now(-10h));\nexternal_table(\"transformers\")\n| join kind=innerunique external_table(\"easttransformers\") on TransformerID\n| join kind=innerunique ActiveTransformers on ServicePointID\n| project-rename kVARated=kVARating,ReadDate=['datetime']\n| project TransformerID,MeterNumber,ReadDate,todouble(TotalKw),todouble(kVARated),todouble(KvaRating),todouble(LowSideVoltage)\n| where KvaRating > kVARated\n| render columnchart ","id":"b9d36650-17a5-4192-b439-45f90efc3754","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"4c6e2755-219f-495f-bcf4-1632f2930f8b"},"text":"let Window = todatetime(now(-10h));\nexternal_table(\"transformers\")\n| join kind=innerunique external_table(\"easttransformers\") on TransformerID\n| join kind=innerunique ActiveTransformers on ServicePointID\n| project-rename RatedkVA=kVARating,ReadingDate=['datetime']\n| project TransformerID,MeterNumber,ReadingDate,todouble(TotalKw),todouble(KvaRating),todouble(LowSideVoltage),RatedkVA\n| where todatetime(ReadingDate) >= Window and KvaRating < RatedkVA\n| render columnchart \n\n","id":"e8d6f3c3-0cfd-48c9-af41-0aae11942511","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"4c6e2755-219f-495f-bcf4-1632f2930f8b"},"text":"let Window = todatetime(now(-10h));\nexternal_table(\"transformers\")\n| join kind=innerunique external_table(\"easttransformers\") on TransformerID\n| join kind=innerunique ActiveTransformers on ServicePointID\n| where todatetime(['datetime']) >= Window and KvaRating < kVARating\n| project-rename kVARated=kVARating\n| summarize AlertCount = count() by TransformerID\n| render table ","id":"eac6a27b-4864-4929-85b4-b1a441543602","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"4c6e2755-219f-495f-bcf4-1632f2930f8b"},"text":"let Window = now(-10h);\nexternal_table(\"transformers\")\n| join kind=innerunique external_table(\"easttransformers\") on TransformerID\n| join kind=innerunique ActiveTransformers on ServicePointID\n| project ['datetime'],MeterNumber,KvaRating,kVARating,todouble(LowSideVoltage1),LowSideVoltage\n| project-rename ReadDate=['datetime'],kVA=KvaRating,RatedkVA=kVARating,LowSideVoltageRating=LowSideVoltage,LowSideVolts = LowSideVoltage1\n| where todatetime(ReadDate) >= Window and todouble(LowSideVolts) > (todouble(LowSideVoltageRating))\n\n","id":"3187362b-539f-43d6-b4ee-0da21a1d7890","usedVariables":[]}]}